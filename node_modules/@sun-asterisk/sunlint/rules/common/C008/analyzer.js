/**
 * C008 Analyzer - Minimize Variable Scope (Declare Near Usage)
 * 
 * Uses ts-morph (AST-based) for 100% accurate analysis with intelligent filtering:
 * - Module-level constants (UPPER_CASE = value)
 * - Redux Toolkit patterns (createAsyncThunk, createSlice)
 * - Storybook meta exports
 * - React hooks (useState, useEffect, etc.)
 * - CSS-in-JS (keyframes, styled, css)
 * 
 * Following Rule C005: Single responsibility - variable scope detection
 * Following Rule C006: Verb-noun naming
 */

const C008TsMorphAnalyzer = require('./ts-morph-analyzer');

class C008Analyzer {
  constructor(semanticEngine = null, options = {}) {
    this.analyzer = new C008TsMorphAnalyzer(semanticEngine, options);
    this.initialized = false;
  }

  async initialize(semanticEngine = null) {
    if (!this.initialized) {
      await this.analyzer.initialize(semanticEngine);
      this.initialized = true;
    }
  }

  async analyze(files, language, options = {}) {
    // Ensure initialized before analysis
    if (!this.initialized) {
      await this.initialize();
    }
    return this.analyzer.analyze(files, language, options);
  }
}

module.exports = C008Analyzer;

